form(method="POST", action="/places/message", novalidate name="form", ng-controller="FormCtrl")
	.form-group(ng-class="{'has-error': (form.$submitted || form.email.$touched) && (form.email.$error.required || form.email.error.email)}", ng-show="!$root.isLoggedIn")
		label.control-label Email
		div(ng-show="form.$submitted || form.email.$touched")
			label.control-label(ng-show="form.email.error.email") This is not a valid email.
		input.form-control(type="email", name="email", ng-model="email", ng-required="!$root.isLoggedIn")
	.form-group(ng-class="{'has-error': (form.$submitted || form.subject.$touched) && form.subject.$error.required}")
		label.control-label Subject
		input.form-control(type="text", name="subject", ng-model="subject", required)
	.form-group(ng-class="{'has-error': (form.$submitted || form.text.$touched) && form.text.$error.required}")
		label.control-label Message
		textarea.form-control(rows='4', name="text", ng-model="text", required)
		input(name="id", type="hidden", value="{{place._id}}")
	.form-group
		label.control-label
		input.btn.btn-sm.btn-primary(type="button", ng-click="submitForm()", value="Send message")